---
title: "Graph Exploration and Brief"
author: "Yukun"
date: "4/27/2022"
output:
  html_document:
    theme: flatly
    toc: TRUE
    toc_float: TRUE
    toc_depth: 2
    number_sections: TRUE
    code_folding: hide
---

```{r load-packages, include=FALSE}
library(ggthemes)
library(babynames) # contains the actual data
library(dplyr) # for manipulating data
library(ggplot2) # for plotting data
library(tidyr)
library(streamgraph) # https://r-graph-gallery.com/streamgraph.html
```

# Streamgraph{-}

A streamgraph is a type of stacked area chart. 

### Example{-}

Exploring the change of baby initials over time.

```{r}
options(warn = -1)
bn <- babynames |>
  mutate(nameInit = substring(name, 1, 1)) |>
  group_by(year, nameInit) |>
  summarise(sumn = sum(n), .groups = "drop")

streamgraph(bn, "nameInit", "sumn", "year", interactive = TRUE, left = 55) |>
  sg_fill_tableau() |>
  sg_axis_x(tick_units = "year", tick_interval = 10, tick_format = "%Y") |>
  sg_legend(TRUE, "Baby Name Initials(A-Z): ")
```

### Data{-}
Data source: <https://github.com/hadley/babynames> . US baby names provided by the SSA. 
This package contains all names used for at least 5 children of either sex.

### Representation Description{-}
A streamgraph represents the evolution of a numeric 
variable for several groups. Areas are usually displayed around a central axis, and edges 
are rounded to give a flowing shape. Streamgraphs are often used to represent the evolution 
variables, which is simlar to a stacked area chart. The different color represents different
groups. The size of the area represents the value in that group. In this chart, we not only show 
the evolution of the number of each group, but also the evolution of the total number of all groups.

### How to Read it and What to Look For{-}
On the example above, the x axis is the year, and the y axis is the number of babies with the same initial.
From left to right, the evolution of the number of babies with the same initial is shown in different stream
with different colors. This chart THe bottom of the chart show a dropdown menu to select the initial. The user also
can highlight the group of interest by moveing the mouse cursor on the area of interest. At the same time,
at the left top of the chart, there is a label shows the total number of babies with the selected initial.

### Presentation Tips{-}
**Interactivity:** Streamgraph can show more information when offered with interactive features, 
which enable the user to select the group of interest, and investigate the number of the group 
at every time point. Hover a group can highlight it, get its name and its exact value. 
**Annotation:** Annotated features is especially useful for non-interactive streamgraphs (i.e. to label a particular stream).
**Color:** Streamgraphs can be color coded by the user. The color is often used to distinguish the groups.
**Composition:** The composition of the streamgraph is very flexible. The user can choose the color, 
the interpolation, and the offset of the stream. Streamgraph also provided a sorting options to sort the groups.

### Variations & Alternatives{-}
Streamgraph provide several variations. The user can adjust the offset and interpolation to one of th evariations 
of the streamgraph. The user can use a stacked area chart as an alternative to show the evolution of the groups.

### How to create it{-}

The following code is to create a streamgraph.
```{r}
# a variation of the above example
streamgraph(bn, "nameInit", "sumn", "year", interactive = TRUE, left = 55, offset = "expand") |>
  sg_fill_tableau() |>
  sg_axis_x(tick_units = "year", tick_interval = 10, tick_format = "%Y") |>
  sg_legend(TRUE, "Baby Name Initials(A-Z): ") |>
  sg_title(title = "variation of the above example: offset = 'expand'")

# a variation of the above example
streamgraph(bn, "nameInit", "sumn", "year", interactive = TRUE, left = 55, offset = "zero") |>
  sg_fill_tableau() |>
  sg_axis_x(tick_units = "year", tick_interval = 10, tick_format = "%Y") |>
  sg_legend(TRUE, "Baby Name Initials(A-Z): ") |>
  sg_title(title = "variation of the above example: offset = 'zero'")

# a variation of the above example
streamgraph(bn, "nameInit", "sumn", "year", interactive = TRUE, left = 55, interpolate = "step") |>
  sg_fill_tableau() |>
  sg_axis_x(tick_units = "year", tick_interval = 10, tick_format = "%Y") |>
  sg_legend(TRUE, "Baby Name Initials(A-Z): ") |>
  sg_title(title = "variation of the above example:interpolate = 'step'")
```